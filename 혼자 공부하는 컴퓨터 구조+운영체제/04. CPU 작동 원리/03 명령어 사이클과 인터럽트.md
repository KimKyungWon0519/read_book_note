# 03.  명령어 사이클과 인터럽트

## 명령어 사이클

### 명령어 사이클

프로그램 속 각각의 명령어들이 실행되는 주기

- **인출 사이클**
    - 메모리에 있는 명령어를 CPU로 가져오는 단계
- **실행 사이클**
    - CPU로 가져온 명령어를 실행하는 단계
- **간접 사이클**
    - 명령어를 실행하기 위해 메모리 접근을 한 번 더 해야됨 ⇒ 해당 단계를 간접 사이클이라고 함

### 인터럽트

CPU 작업을 방해하는 신호

**인터럽트의 종류**

### **동기 인터럽트 (=예외)**

CPU가 실행하는 프로그래밍상의 오류와 같은 예외적인 상황에 마주쳤을 때 발생하는 인터럽트

**예외의 종류**

- **폴트**
    - 예외를 처리한 직후 예외가 발생한 명령어로부터 실행을 재개하는 예외
- **트랩**
    - 예외를 처리한 직후 예외가 발생한 명령의 다음 명령어로부터 실행을 재개하는 예외
- **중단**
    - CPU가 실행 중인 프로그램을 강제로 중단시킬 수밖에 없는 심각한 오류를 발견했을 때 발생하는 예외
- **소프트웨어 인터럽트**
    - 시스템 호출이 발생했을 때 나타남

### **비동기 인터럽트 (=하드웨어 인터럽트)**

입출력장치에 의해 발생하는 인터럽트

**비동기 인터럽트의 처리 순서**

1. 입출력장치는 CPU에 **인터럽트 요청 신호**를 보냄
2. CPU는 실행 사이클이 끝나고 명령어를 인출하기 전 항상 인터럽트 여부를 확인
3. CPU는 인터럽트 요청을 확인하고 **인터럽트 플래그**를 통해 현재 인터럽트를 받아들일 수 있는 지 여부를 확인
4. 인터럽트를 받아들일 수 있다면 CPU는 지금까지의 작업을 백업
5. CPU는 **인터럽트 벡터**를 참고하여 **인터럽트 서비스 루틴**을 실행
6. 인터럽트 서비스 루틴 실행이 끝나면 4단계에서 백업해 둔 작업을 복구하여 실행을 재개

용어 정리  
**인터럽트 요청 신호**

CPU의 작업을 방해하는 인터럽트에 대한 요청

**인터럽트 플래그**

인터럽트 요청 신호를 받아들일지 무시할지를 결정하는 비트

**인터럽트 서비스 루틴 (=인터럽트 핸들러)**

인터럽트를 처리하기 위한 프로그램 (어떤 인터럽트가 발생했을 때 해당 인터럽트를 어떻게 처리하고 작동해야 할지에 대한 정보로 이루어진 프로그램)

**인터럽트 벡터**

인터럽트 서비스 루틴을 식별하기 위한 정보